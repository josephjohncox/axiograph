# Axiograph REPL script: physics-scale world model MPC demo
#
# Run (from repo root):
#   make binaries
#   ./bin/axiograph repl --script examples/repl_scripts/world_model_mpc_physics_demo.repl

import_axi examples/physics/PhysicsOntology.axi
import_axi examples/physics/PhysicsMeasurements.axi
# Notes:
# - This script is used by offline CI/e2e tests, so it uses the `stub` world-model backend
#   (deterministic, no network/secrets).
# - For an LLM-backed run, replace `wm use stub` with:
#     wm use llm
#   and configure one of:
#     export WORLD_MODEL_BACKEND=openai   export OPENAI_API_KEY=...
#     export WORLD_MODEL_BACKEND=anthropic export ANTHROPIC_API_KEY=...
#     export WORLD_MODEL_BACKEND=ollama   (ollama serve)
wm use stub
wm plan build/world_model_mpc_physics_plan.json --steps 2 --rollouts 2 --max 150 --guardrail strict --plane both --goal "expand physics ontology coverage" --axi examples/physics/PhysicsOntology.axi --cq-file examples/competency_questions/physics_cq.json

# Export the resulting snapshot (PathDBExportV1) so e2e tests can certify a query.
export_axi build/world_model_mpc_physics_export_v1.axi
save build/world_model_mpc_physics.axpd
