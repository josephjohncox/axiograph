# Axiograph REPL script: world model MPC demo
#
# Run (from repo root):
#   make binaries
#   ./bin/axiograph repl --script examples/repl_scripts/world_model_mpc_demo.repl
#
# Or (if installed to PATH):
#   axiograph repl --script examples/repl_scripts/world_model_mpc_demo.repl
#
# Configure the world model backend before running (defaults to OpenAI):
#   export WORLD_MODEL_BACKEND=openai
#   export WORLD_MODEL_MODEL=gpt-4o-mini
#   export OPENAI_API_KEY=...

import_axi examples/Family.axi
wm use llm
wm plan build/world_model_mpc_demo_plan.json --steps 2 --rollouts 2 --goal "predict missing parent links" --axi examples/Family.axi --cq "has_parent=select ?p where ?p is Person limit 1"

# Export the resulting snapshot (PathDBExportV1) so e2e tests can certify a query.
export_axi build/world_model_mpc_export_v1.axi
save build/world_model_mpc.axpd
